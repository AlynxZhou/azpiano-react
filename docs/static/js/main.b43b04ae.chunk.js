(this["webpackJsonpazpiano-react"]=this["webpackJsonpazpiano-react"]||[]).push([[0],{34:function(e){e.exports=JSON.parse('{"B2":"<7>","C3":"(1)","Db3":"(#1)","D3":"(2)","Eb3":"(#2)","E3":"(3)","F3":"(4)","Gb3":"(#4)","G3":"(5)","Ab3":"(#5)","A3":"(6)","Bb3":"(#6)","B3":"(7)","C4":"1","Db4":"#1","D4":"2","Eb4":"#2","E4":"3","F4":"4","Gb4":"#4","G4":"5","Ab4":"#5","A4":"6","Bb4":"#6","B4":"7","C5":"[1]","Db5":"[#1]","D5":"[2]","Eb5":"[#2]","E5":"[3]","F5":"[4]","Gb5":"[#4]","G5":"[5]","Ab5":"[#5]","A5":"[6]","Bb5":"[#6]","B5":"[7]","C6":"{1}","Db6":"{#1}","D6":"{2}","Eb6":"{#2}","E6":"{3}","F6":"{4}","Gb6":"{#4}","G6":"{5}","Ab6":"{#5}","A6":"{6}","Bb6":"{#6}","B6":"{7}"}')},44:function(e){e.exports=JSON.parse('{"Escape":"Esc","Backquote":"`","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"10","Minus":"-","Equal":"=","IntlYen":"\uffe5","Backspace":"Backspace","Tab":"Tab","KeyQ":"Q","KeyW":"W","KeyE":"E","KeyR":"R","KeyT":"T","KeyY":"Y","KeyU":"U","KeyI":"I","KeyO":"O","KeyP":"P","BracketLeft":"[","BracketRight":"]","Backslash":"\\\\","CapsLock":"CapsLock","KeyA":"A","KeyS":"S","KeyD":"D","KeyF":"F","KeyG":"G","KeyH":"H","KeyJ":"J","KeyK":"K","KeyL":"L","Semicolon":";","Quote":"\'","Enter":"Enter","ShiftLeft":"Shift","KeyZ":"Z","KeyX":"X","KeyC":"C","KeyV":"V","KeyB":"B","KeyN":"N","KeyM":"M","Comma":",","Period":".","Slash":"/","IntlRo":"\uff3c","ShiftRight":"Shift","ControlLeft":"Ctrl","Space":"Space","ControlRight":"Ctrl"}')},46:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backspace","C4"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backslash","C5"]],[["CapsLock","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},47:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backspace","C4"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backslash","C5"]],[["ControlLeft","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},48:function(e){e.exports=JSON.parse('[[["Escape","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backslash","C4"],["Backquote","B2"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backspace","C5"]],[["ControlLeft","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},49:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["IntlYen","C4"],["Backspace","B2"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Enter","C6"]],[["ControlLeft","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Backslash","B5"],["Enter","C6"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["IntlRo","Bb6"],["ShiftRight","B6"]],[["Space","C5"]]]')},50:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["BracketLeft","Bb3"],["BracketRight","B3"],["Backspace","C4"]],[["Tab","B3"],["Quote","C4"],["Comma","Db4"],["Period","D4"],["KeyP","Eb4"],["KeyY","E4"],["KeyF","F4"],["KeyG","Gb4"],["KeyC","G4"],["KeyR","Ab4"],["KeyL","A4"],["Slash","Bb4"],["Equal","B4"],["Backslash","C5"]],[["CapsLock","B4"],["KeyA","C5"],["KeyO","Db5"],["KeyE","D5"],["KeyU","Eb5"],["KeyI","E5"],["KeyD","F5"],["KeyH","Gb5"],["KeyT","G5"],["KeyN","Ab5"],["KeyS","A5"],["Minus","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["Semicolon","C6"],["KeyQ","Db6"],["KeyJ","D6"],["KeyK","Eb6"],["KeyX","E6"],["KeyB","F6"],["KeyM","Gb6"],["KeyW","G6"],["KeyV","Ab6"],["KeyZ","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},51:function(e){e.exports=JSON.parse('{"lilypond-is":{"B2":"b,","C3":"c","Db3":"cis","D3":"d","Eb3":"dis","E3":"e","F3":"f","Gb3":"fis","G3":"g","Ab3":"gis","A3":"a","Bb3":"ais","B3":"b","C4":"c\'","Db4":"cis\'","D4":"d\'","Eb4":"dis\'","E4":"e\'","F4":"f\'","Gb4":"fis\'","G4":"g\'","Ab4":"gis\'","A4":"a\'","Bb4":"ais\'","B4":"b\'","C5":"c\'\'","Db5":"cis\'\'","D5":"d\'\'","Eb5":"dis\'\'","E5":"e\'\'","F5":"f\'\'","Gb5":"fis\'\'","G5":"g\'\'","Ab5":"gis\'\'","A5":"a\'\'","Bb5":"ais\'\'","B5":"b\'\'","C6":"c\'\'\'","Db6":"cis\'\'\'","D6":"d\'\'\'","Eb6":"dis\'\'\'","E6":"e\'\'\'","F6":"f\'\'\'","Gb6":"fis\'\'\'","G6":"g\'\'\'","Ab6":"gis\'\'\'","A6":"a\'\'\'","Bb6":"ais\'\'\'","B6":"b\'\'\'"},"lilypond-es":{"B2":"b,","C3":"c","Db3":"des","D3":"d","Eb3":"ees","E3":"e","F3":"f","Gb3":"ges","G3":"g","Ab3":"aes","A3":"a","Bb3":"bes","B3":"b","C4":"c\'","Db4":"des\'","D4":"d\'","Eb4":"ees\'","E4":"e\'","F4":"f\'","Gb4":"ges\'","G4":"g\'","Ab4":"aes\'","A4":"a\'","Bb4":"bes\'","B4":"b\'","C5":"c\'\'","Db5":"des\'\'","D5":"d\'\'","Eb5":"ees\'\'","E5":"e\'\'","F5":"f\'\'","Gb5":"ges\'\'","G5":"g\'\'","Ab5":"aes\'\'","A5":"a\'\'","Bb5":"bes\'\'","B5":"b\'\'","C6":"c\'\'\'","Db6":"des\'\'\'","D6":"d\'\'\'","Eb6":"ees\'\'\'","E6":"e\'\'\'","F6":"f\'\'\'","Gb6":"ges\'\'\'","G6":"g\'\'\'","Ab6":"aes\'\'\'","A6":"a\'\'\'","Bb6":"bes\'\'\'","B6":"b\'\'\'"}}')},60:function(e,t,a){e.exports=a(74)},65:function(e,t,a){},66:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(7),r=a.n(s),o=(a(65),a(12)),l=a(11),c=a(16),u=a(17),p=a(18),h=a(34),y=a(44),d=a(111),m=a(107),b=(a(66),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(m.a,{className:this.props.pressed?"grid grid-pressed":"grid"},n.a.createElement("span",{className:"grid-upper"},this.props.upper),n.a.createElement("br",null),n.a.createElement("span",{className:"grid-lower"},this.props.lower))}}]),t}(n.a.Component)),g=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderBlock",value:function(e,t,a,i){var s=y[e[0]];if("jp"===this.props.layoutParam)switch(e[0]){case"Equal":s="^";break;case"BracketLeft":s="@";break;case"BracketRight":s="[";break;case"Quote":s=":";break;case"Backslash":s="]"}var r="digit"===this.props.displayParam?h[e[1]]:e[1];return 0===a&&t===i-1?"hhkb"===this.props.layoutParam?n.a.createElement(d.a,{item:!0,xs:2,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):1===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):1===a&&t===i-1?"jp"===this.props.layoutParam?n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):2===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):2===a&&t===i-1?"jp"===this.props.layoutParam?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):3===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):3===a&&t===i-1?n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):4===a?n.a.createElement(d.a,{item:!0,xs:6,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]})):n.a.createElement(d.a,{item:!0,xs:2,key:t},n.a.createElement(b,{upper:s,lower:r,pressed:this.props.state[e[0]]}))}},{key:"renderRow",value:function(e,t){var a=this;return n.a.createElement(d.a,{container:!0,justify:"center",spacing:3,wrap:"nowrap",key:t},e.map((function(i,n){return a.renderBlock(i,n,t,e.length)})))}},{key:"render",value:function(){return n.a.createElement("div",{className:"map"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"map-inner"},this.props.layout.map(this.renderRow.bind(this)))))}}]),t}(n.a.Component),E=a(119),f=a(115),K=a(120),D=a(122),k=(a(70),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"log"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"log-inner"},n.a.createElement("div",{className:"log-text"},n.a.createElement(K.a,{value:"digit"===this.props.outputMode?this.props.state.join(""):this.props.state.join(" "),variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0,rows:"8",multiline:!0})),n.a.createElement("div",{className:"log-buttons"},n.a.createElement("div",{className:"log-item"},n.a.createElement(D.a,{control:n.a.createElement(E.a,{className:"log-button",checked:this.props.enabled,color:"primary",onChange:this.props.onSwitchChange}),label:"Enable (F1)"})),n.a.createElement("div",{className:"log-item"},n.a.createElement(f.a,{className:"log-button",variant:"contained",onClick:this.props.onSpaceClick},"Space (F2)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(f.a,{className:"log-button",variant:"contained",onClick:this.props.onReturnClick},"Return (F3)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(f.a,{className:"log-button",variant:"contained",color:"secondary",onClick:this.props.onDeleteClick},"Delete (F4)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(f.a,{className:"log-button",variant:"contained",color:"secondary",onClick:this.props.onClearClick},"Clear (F5)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(f.a,{className:"log-button",variant:"contained",color:"primary",onClick:this.props.onCopyClick},"Copy (F6)"))))))}}]),t}(n.a.Component)),C=a(118),v=a(123),B=a(121),S=a(114),A=(a(71),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"settings"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"settings-inner"},n.a.createElement("div",{className:"settings-item"},n.a.createElement(S.a,{fullWidth:!0},n.a.createElement(B.a,{id:"display"},"Display"),n.a.createElement(C.a,{labelId:"display",defaultValue:this.props.defaultDisplayValue,onChange:this.props.onDisplayChange},this.props.displayOptions.map((function(e,t){return n.a.createElement(v.a,{key:t,value:e},e)}))))),n.a.createElement("div",{className:"settings-item"},n.a.createElement(S.a,{fullWidth:!0},n.a.createElement(B.a,{id:"output"},"Output"),n.a.createElement(C.a,{labelId:"output",defaultValue:this.props.defaultOutputValue,onChange:this.props.onOutputChange},this.props.outputOptions.map((function(e,t){return n.a.createElement(v.a,{key:t,value:e},e)}))))),n.a.createElement("div",{className:"settings-item"},n.a.createElement(S.a,{fullWidth:!0},n.a.createElement(B.a,{id:"layout"},"Layout"),n.a.createElement(C.a,{labelId:"layout",defaultValue:this.props.defaultLayoutValue,onChange:this.props.onLayoutChange},this.props.layoutOptions.map((function(e,t){return n.a.createElement(v.a,{key:t,value:e},e)}))))))))}}]),t}(n.a.Component)),O=(a(72),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"info"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"info-inner"},n.a.createElement("div",null,"Star or fork on ",n.a.createElement("a",{href:"https://github.com/AlynxZhou/azpiano-react/",target:"_blank",rel:"noreferrer noopener"},"GitHub"),"."),n.a.createElement("div",null,"Welcome to ",n.a.createElement("a",{href:"https://alynx.one/",target:"_blank",rel:"noreferrer noopener"},"Alynx Zhou's Homepage"),"."),n.a.createElement("div",null,"Icons made by ",n.a.createElement("a",{href:"https://www.flaticon.com/authors/smartline",title:"Smartline",target:"_blank",rel:"noreferrer noopener"},"Smartline")," from ",n.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noreferrer noopener"},"www.flaticon.com"),"."))))}}]),t}(n.a.Component)),G=window.AudioContext||window.webkitAudioContext,w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.context=new G,this.gainNode=this.context.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.context.destination),this.sources={},this.stopDelay=t.stopDelay||.3,this.decodeAudioData=this.context.decodeAudioData.bind(this.context)}return Object(l.a)(e,[{key:"play",value:function(e,t){null==this.sources[e]&&(this.sources[e]=this.context.createBufferSource(),this.sources[e].buffer=t,this.sources[e].connect(this.gainNode),this.sources[e].start(this.context.currentTime))}},{key:"pause",value:function(e){null!=this.sources[e]&&(this.sources[e].stop(this.context.currentTime+this.stopDelay),delete this.sources[e])}},{key:"pauseAll",value:function(){for(var e in this.sources)this.pause(e)}}]),e}(),N=function(){function e(){Object(o.a)(this,e),this.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return Object(l.a)(e,[{key:"removePaddingChars",value:function(e){for(var t=e.length-1;t>=0;--t)if("="!==e.charAt(t))return e.substring(0,t+1);return e}},{key:"decode",value:function(e){e=e.replace(/[^A-Za-z0-9+/=]/g,"");for(var t,a,i,n,s,r,o=(e=this.removePaddingChars(e)).length/4*3,l=new ArrayBuffer(o),c=new Uint8Array(l),u=0,p=0;p<o;p+=3)t=this.keyStr.indexOf(e.charAt(u++))<<2|(n=this.keyStr.indexOf(e.charAt(u++)))>>4,a=(15&n)<<4|(s=this.keyStr.indexOf(e.charAt(u++)))>>2,i=(3&s)<<6|(r=this.keyStr.indexOf(e.charAt(u++))),c[p]=t,64!==s&&(c[p+1]=a),64!==r&&(c[p+2]=i);return l}}]),e}(),L=a(46),P=a(47),F=a(48),x=a(49),j=a(50),R=a(51),M=(a(73),a(116)),V=a(117),Q="data:audio/ogg;base64,".length,W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).decoder=new N,a.searchParams=new URLSearchParams(window.location.search),a.mapLayouts={default:L,ctrlcaps:P,hhkb:F,jp:x,dvorak:j},a.displayOptions=["digit","note"],a.outputOptions=["digit","lilypond-is","lilypond-es"],a.state={start:!1,ready:!1,percent:0,logState:[],logEnabled:!0,mapState:{},displayParam:a.searchParams.has("display")&&-1!==a.displayOptions.indexOf(a.searchParams.get("display"))?a.searchParams.get("display"):"digit",outputParam:a.searchParams.has("output")&&-1!==a.outputOptions.indexOf(a.searchParams.get("output"))?a.searchParams.get("output"):"digit",layoutParam:a.searchParams.has("layout")&&null!=a.mapLayouts[a.searchParams.get("layout")]?a.searchParams.get("layout"):"default"},a.mapLayout=a.mapLayouts[a.state.layoutParam],a.updateMapLayout(),a.notesBuffers={},a.notesDigits=h,a.notesLily=R,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this)),document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this)),document.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this))}},{key:"updateQueryString",value:function(){var e=[window.location.protocol,"//",window.location.host,window.location.pathname,"?",this.searchParams.toString()].join("");window.history.replaceState({path:e},"",e)}},{key:"updateMapLayout",value:function(){this.codesNotes={};var e=!0,t=!1,a=void 0;try{for(var i,n=this.mapLayout[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var s=i.value,r=!0,o=!1,l=void 0;try{for(var c,u=s[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var p=c.value;this.codesNotes[p[0]]=p[1]}}catch(h){o=!0,l=h}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}}}catch(h){t=!0,a=h}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}},{key:"onVisibilityChange",value:function(e){"visible"!==document.visibilityState&&(this.player.pauseAll(),this.setState({mapState:{}}))}},{key:"onKeyDown",value:function(e){if(e.preventDefault(),this.state.ready){switch(e.code){case"F1":return void this.onSwitchChange();case"F2":return void this.onSpaceClick();case"F3":return void this.onReturnClick();case"F4":return void this.onDeleteClick();case"F5":return void this.onClearClick();case"F6":return void this.onCopyClick()}if(!e.repeat&&null!=this.codesNotes[e.code]){var t=e.code,a=this.codesNotes[t],i=this.state,n=i.logState,s=i.mapState;s[t]=!0,this.state.logEnabled&&this.state.ready&&n.push("digit"===this.state.outputParam?this.notesDigits[a]:this.notesLily[this.state.outputParam][a]),this.setState({logState:n,mapState:s}),this.player.play(a,this.notesBuffers[a])}}else this.onStartClick()}},{key:"onKeyUp",value:function(e){if(e.preventDefault(),!e.repeat&&null!=this.codesNotes[e.code]){var t=e.code,a=this.codesNotes[t],i=this.state.mapState;i[t]=!1,this.setState({mapState:i}),this.player.pause(a)}}},{key:"onSwitchChange",value:function(e){if(null!=e)this.setState({logEnabled:e.target.checked});else{var t=this.state.logEnabled;this.setState({logEnabled:!t})}}},{key:"onDeleteClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.pop(),this.setState({logState:e})}}},{key:"onSpaceClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.push(" "),this.setState({logState:e})}}},{key:"onReturnClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.push("\n"),this.setState({logState:e})}}},{key:"onClearClick",value:function(){var e=this.state.logState;e=[],this.setState({logState:e})}},{key:"onCopyClick",value:function(){var e=this.state.logState,t=document.createElement("textarea");document.body.appendChild(t),t.value=e.join(""),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"onDisplayChange",value:function(e){this.setState({displayParam:e.target.value}),this.searchParams.set("display",e.target.value),this.updateQueryString()}},{key:"onOutputChange",value:function(e){this.setState({outputParam:e.target.value}),this.searchParams.set("output",e.target.value),this.updateQueryString()}},{key:"onLayoutChange",value:function(e){this.setState({layoutParam:e.target.value}),this.searchParams.set("layout",e.target.value),this.updateQueryString(),this.mapLayout=this.mapLayouts[e.target.value],this.updateMapLayout()}},{key:"onStartClick",value:function(){var e=this;this.setState({start:!0}),this.player=new w,a.e(3).then(a.t.bind(null,125,3)).then((function(t){for(var a=t.default,i=Object.keys(a).length,n=function(){var t=r[s];e.player.decodeAudioData(e.decoder.decode(a[t].substring(Q)),(function(a){e.notesBuffers[t]=a,e.state.ready||e.setState({percent:Math.round(100*Object.keys(e.notesBuffers).length/i),ready:Object.keys(e.notesBuffers).length===i})}))},s=0,r=Object.keys(a);s<r.length;s++)n()}))}},{key:"render",value:function(){return this.state.start?this.state.ready?n.a.createElement("div",{className:"app"},n.a.createElement(M.a,{maxWidth:"xl"},n.a.createElement(g,{layout:this.mapLayout,state:this.state.mapState,layoutParam:this.state.layoutParam,displayParam:this.state.displayParam}),n.a.createElement(k,{onSwitchChange:this.onSwitchChange.bind(this),onDeleteClick:this.onDeleteClick.bind(this),onSpaceClick:this.onSpaceClick.bind(this),onReturnClick:this.onReturnClick.bind(this),onClearClick:this.onClearClick.bind(this),onCopyClick:this.onCopyClick.bind(this),outputMode:this.state.outputParam,state:this.state.logState,enabled:this.state.logEnabled}),n.a.createElement(A,{onDisplayChange:this.onDisplayChange.bind(this),onOutputChange:this.onOutputChange.bind(this),onLayoutChange:this.onLayoutChange.bind(this),defaultDisplayValue:this.state.displayParam,displayOptions:this.displayOptions,defaultOutputValue:this.state.outputParam,outputOptions:this.outputOptions,defaultLayoutValue:this.state.layoutParam,layoutOptions:Object.keys(this.mapLayouts)}),n.a.createElement(O,null))):n.a.createElement("div",{className:"app"},n.a.createElement(M.a,{maxWidth:"xl"},n.a.createElement("div",{className:"loading"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"loading-inner"},n.a.createElement("div",{className:"loading-item"},n.a.createElement(V.a,null)),n.a.createElement("div",{className:"loading-item"},n.a.createElement(V.a,{variant:"determinate",value:this.state.percent,color:"secondary"}))))))):n.a.createElement("div",{className:"app"},n.a.createElement(M.a,{maxWidth:"xl"},n.a.createElement("div",{className:"loading"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"loading-inner"},n.a.createElement("div",{className:"loading-item"},n.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.onStartClick.bind(this)},"Press Any Key to Start")))))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.b43b04ae.chunk.js.map