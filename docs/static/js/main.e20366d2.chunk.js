(this["webpackJsonpazpiano-react"]=this["webpackJsonpazpiano-react"]||[]).push([[0],{20:function(e){e.exports=JSON.parse('{"Escape":"Esc","Backquote":"`","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"10","Minus":"-","Equal":"=","Backspace":"Backspace","Tab":"Tab","KeyQ":"Q","KeyW":"W","KeyE":"E","KeyR":"R","KeyT":"T","KeyY":"Y","KeyU":"U","KeyI":"I","KeyO":"O","KeyP":"P","BracketLeft":"[","BracketRight":"]","Backslash":"\\\\","CapsLock":"CapsLock","KeyA":"A","KeyS":"S","KeyD":"D","KeyF":"F","KeyG":"G","KeyH":"H","KeyJ":"J","KeyK":"K","KeyL":"L","Semicolon":";","Quote":"\'","Enter":"Enter","ShiftLeft":"Shift","KeyZ":"Z","KeyX":"X","KeyC":"C","KeyV":"V","KeyB":"B","KeyN":"N","KeyM":"M","Comma":",","Period":".","Slash":"/","ShiftRight":"Shift","ControlLeft":"Ctrl","Space":"Space","ControlRight":"Ctrl"}')},35:function(e){e.exports=JSON.parse('{"B2":"<7>","C4":"1","D4":"2","E4":"3","F4":"4","G4":"5","A4":"6","B4":"7","C3":"(1)","Db3":"(#1)","D3":"(2)","Eb3":"(#2)","E3":"(3)","F3":"(4)","Gb3":"(#4)","G3":"(5)","Ab3":"(#5)","A3":"(6)","Bb3":"(#6)","B3":"(7)","Db4":"#1","Eb4":"#2","Gb4":"#4","Ab4":"#5","Bb4":"#6","C5":"[1]","Db5":"[#1]","D5":"[2]","Eb5":"[#2]","E5":"[3]","F5":"[4]","Gb5":"[#4]","G5":"[5]","Ab5":"[#5]","A5":"[6]","Bb5":"[#6]","B5":"[7]","C6":"{1}","Db6":"{#1}","D6":"{2}","Eb6":"{#2}","E6":"{3}","F6":"{4}","Gb6":"{#4}","G6":"{5}","Ab6":"{#5}","A6":"{6}","Bb6":"{#6}","B6":"{7}"}')},46:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backspace","C4"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backslash","C5"]],[["CapsLock","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},47:function(e){e.exports=JSON.parse('[[["Backquote","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backspace","C4"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backslash","C5"]],[["ControlLeft","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},48:function(e){e.exports=JSON.parse('[[["Escape","B2"],["Digit1","C3"],["Digit2","Db3"],["Digit3","D3"],["Digit4","Eb3"],["Digit5","E3"],["Digit6","F3"],["Digit7","Gb3"],["Digit8","G3"],["Digit9","Ab3"],["Digit0","A3"],["Minus","Bb3"],["Equal","B3"],["Backslash","C4"],["Backquote","B2"]],[["Tab","B3"],["KeyQ","C4"],["KeyW","Db4"],["KeyE","D4"],["KeyR","Eb4"],["KeyT","E4"],["KeyY","F4"],["KeyU","Gb4"],["KeyI","G4"],["KeyO","Ab4"],["KeyP","A4"],["BracketLeft","Bb4"],["BracketRight","B4"],["Backspace","C5"]],[["ControlLeft","B4"],["KeyA","C5"],["KeyS","Db5"],["KeyD","D5"],["KeyF","Eb5"],["KeyG","E5"],["KeyH","F5"],["KeyJ","Gb5"],["KeyK","G5"],["KeyL","Ab5"],["Semicolon","A5"],["Quote","Bb5"],["Enter","B5"]],[["ShiftLeft","B5"],["KeyZ","C6"],["KeyX","Db6"],["KeyC","D6"],["KeyV","Eb6"],["KeyB","E6"],["KeyN","F6"],["KeyM","Gb6"],["Comma","G6"],["Period","Ab6"],["Slash","A6"],["ShiftRight","Bb6"]],[["Space","B6"]]]')},56:function(e,t,a){e.exports=a(70)},61:function(e,t,a){},62:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(7),o=a.n(s),r=(a(61),a(12)),l=a(11),c=a(16),u=a(17),h=a(18),y=a(35),p=a(20),d=a(108),m=a(104),b=(a(62),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(m.a,{className:this.props.pressed?"grid grid-pressed":"grid"},n.a.createElement("span",{className:"grid-upper"},this.props.upper),n.a.createElement("br",null),n.a.createElement("span",{className:"grid-lower"},this.props.lower))}}]),t}(n.a.Component)),g=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderBlock",value:function(e,t,a,i){var s="digit"===this.props.display?y[e[1]]:e[1];return 0===a&&t===i-1?n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):1===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):1===a&&t===i-1?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):2===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):2===a&&t===i-1?n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):3===a&&0===t?n.a.createElement(d.a,{item:!0,xs:3,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):3===a&&t===i-1?n.a.createElement(d.a,{item:!0,xs:4,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):4===a?n.a.createElement(d.a,{item:!0,xs:6,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]})):n.a.createElement(d.a,{item:!0,xs:2,key:t},n.a.createElement(b,{upper:p[e[0]],lower:s,pressed:this.props.state[e[0]]}))}},{key:"renderRow",value:function(e,t){var a=this;return n.a.createElement(d.a,{container:!0,justify:"center",spacing:3,wrap:"nowrap",key:t},e.map((function(i,n){return a.renderBlock(i,n,t,e.length)})))}},{key:"render",value:function(){return n.a.createElement("div",{className:"map"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"map-inner"},this.props.layout.map(this.renderRow.bind(this)))))}}]),t}(n.a.Component),f=a(116),E=a(112),v=a(117),k=a(119),K=(a(66),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"log"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"log-inner"},n.a.createElement("div",{className:"log-text"},n.a.createElement(v.a,{defaultValue:this.props.state.join(""),variant:"outlined",InputProps:{readOnly:!0},fullWidth:!0,rows:"8",multiline:!0})),n.a.createElement("div",{className:"log-buttons"},n.a.createElement("div",{className:"log-item"},n.a.createElement(k.a,{control:n.a.createElement(f.a,{className:"log-button",checked:this.props.enabled,color:"primary",onChange:this.props.onSwitchChange}),label:"Enable (F1)"})),n.a.createElement("div",{className:"log-item"},n.a.createElement(E.a,{className:"log-button",variant:"contained",onClick:this.props.onSpaceClick},"Space (F2)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(E.a,{className:"log-button",variant:"contained",onClick:this.props.onReturnClick},"Return (F3)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(E.a,{className:"log-button",variant:"contained",color:"secondary",onClick:this.props.onDeleteClick},"Delete (F4)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(E.a,{className:"log-button",variant:"contained",color:"secondary",onClick:this.props.onClearClick},"Clear (F5)")),n.a.createElement("div",{className:"log-item"},n.a.createElement(E.a,{className:"log-button",variant:"contained",color:"primary",onClick:this.props.onCopyClick},"Copy (F6)"))))))}}]),t}(n.a.Component)),C=a(115),D=a(120),S=a(118),B=a(111),O=(a(67),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"settings"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"settings-inner"},n.a.createElement("div",{className:"settings-item"},n.a.createElement(B.a,{fullWidth:!0},n.a.createElement(S.a,{id:"display"},"Display"),n.a.createElement(C.a,{labelId:"display",defaultValue:this.props.defaultDisplayValue,onChange:this.props.onDisplayChange},this.props.displayOptions.map((function(e,t){return n.a.createElement(D.a,{key:t,value:e},e)}))))),n.a.createElement("div",{className:"settings-item"},n.a.createElement(B.a,{fullWidth:!0},n.a.createElement(S.a,{id:"layout"},"Layout"),n.a.createElement(C.a,{labelId:"layout",defaultValue:this.props.defaultLayoutValue,onChange:this.props.onLayoutChange},this.props.layoutOptions.map((function(e,t){return n.a.createElement(D.a,{key:t,value:e},e)}))))))))}}]),t}(n.a.Component)),w=(a(68),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"info"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"info-inner"},n.a.createElement("div",null,"Star or fork on ",n.a.createElement("a",{href:"https://github.com/AlynxZhou/azpiano-react/",target:"_blank",rel:"noreferrer noopener"},"GitHub"),"."),n.a.createElement("div",null,"Welcome to ",n.a.createElement("a",{href:"https://alynx.moe/",target:"_blank",rel:"noreferrer noopener"},"Alynx Zhou's Homepage"),"."))))}}]),t}(n.a.Component)),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.context=new AudioContext,this.gainNode=this.context.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.context.destination),this.sources={},this.stopDelay=t.stopDelay||.3,this.decodeAudioData=this.context.decodeAudioData.bind(this.context)}return Object(l.a)(e,[{key:"play",value:function(e,t){null==this.sources[e]&&(this.sources[e]=this.context.createBufferSource(),this.sources[e].buffer=t,this.sources[e].connect(this.gainNode),this.sources[e].start(this.context.currentTime))}},{key:"pause",value:function(e){null!=this.sources[e]&&(this.sources[e].stop(this.context.currentTime+this.stopDelay),delete this.sources[e])}},{key:"pauseAll",value:function(){for(var e in this.sources)this.pause(e)}}]),e}(),N=function(){function e(){Object(r.a)(this,e),this.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return Object(l.a)(e,[{key:"removePaddingChars",value:function(e){for(var t=e.length-1;t>=0;--t)if("="!==e.charAt(t))return e.substring(0,t+1);return e}},{key:"decode",value:function(e){e=e.replace(/[^A-Za-z0-9+/=]/g,"");for(var t,a,i,n,s,o,r=(e=this.removePaddingChars(e)).length/4*3,l=new ArrayBuffer(r),c=new Uint8Array(l),u=0,h=0;h<r;h+=3)t=this.keyStr.indexOf(e.charAt(u++))<<2|(n=this.keyStr.indexOf(e.charAt(u++)))>>4,a=(15&n)<<4|(s=this.keyStr.indexOf(e.charAt(u++)))>>2,i=(3&s)<<6|(o=this.keyStr.indexOf(e.charAt(u++))),c[h]=t,64!==s&&(c[h+1]=a),64!==o&&(c[h+2]=i);return l}}]),e}(),j=a(46),x=a(47),G=a(48),L=(a(69),a(113)),F=a(114),P="data:audio/ogg;base64,".length,R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).player=new A,a.decoder=new N,a.searchParams=new URLSearchParams(window.location.search),a.layouts={default:j,ctrlcaps:x,hhkb:G},a.displayOptions=["digit","note"],a.state={ready:!1,percent:0,logState:[],logEnabled:!0,mapState:{},display:a.searchParams.has("display")&&-1!==a.displayOptions.indexOf(a.searchParams.get("display"))?a.searchParams.get("display"):"digit",layout:a.searchParams.has("layout")&&null!=a.layouts[a.searchParams.get("layout")]?a.searchParams.get("layout"):"default"},a.layout=a.layouts[a.state.layout],a.updateLayout(),a.notesBuffers={},a.notesDigits=y,a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;a.e(3).then(a.t.bind(null,122,3)).then((function(t){var a=t.default,i=Object.keys(a).length,n=function(t){e.player.decodeAudioData(e.decoder.decode(a[t].substring(P)),(function(a){e.notesBuffers[t]=a,e.state.ready||e.setState({percent:Math.round(100*Object.keys(e.notesBuffers).length/i),ready:Object.keys(e.notesBuffers).length===i})}))};for(var s in a)n(s)})),document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this)),document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this)),document.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this))}},{key:"updateQueryString",value:function(){var e=[window.location.protocol,"//",window.location.host,window.location.pathname,"?",this.searchParams.toString()].join("");window.history.replaceState({path:e},"",e)}},{key:"updateLayout",value:function(){this.codesNotes={};var e=!0,t=!1,a=void 0;try{for(var i,n=this.layout[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var s=i.value,o=!0,r=!1,l=void 0;try{for(var c,u=s[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;this.codesNotes[h[0]]=h[1]}}catch(y){r=!0,l=y}finally{try{o||null==u.return||u.return()}finally{if(r)throw l}}}}catch(y){t=!0,a=y}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}},{key:"onVisibilityChange",value:function(e){"visible"!==document.visibilityState&&(this.player.pauseAll(),this.setState({mapState:{}}))}},{key:"onKeyDown",value:function(e){switch(e.preventDefault(),e.code){case"F1":return void this.onSwitchChange();case"F2":return void this.onSpaceClick();case"F3":return void this.onReturnClick();case"F4":return void this.onDeleteClick();case"F5":return void this.onClearClick();case"F6":return void this.onCopyClick()}if(!e.repeat&&null!=this.codesNotes[e.code]){var t=e.code,a=this.codesNotes[t],i=this.state,n=i.logState,s=i.mapState;s[t]=!0,this.state.logEnabled&&this.state.ready&&n.push(this.notesDigits[a]),this.setState({logState:n,mapState:s}),this.player.play(a,this.notesBuffers[a])}}},{key:"onKeyUp",value:function(e){if(e.preventDefault(),!e.repeat&&null!=this.codesNotes[e.code]){var t=e.code,a=this.codesNotes[t],i=this.state.mapState;i[t]=!1,this.setState({mapState:i}),this.player.pause(a)}}},{key:"onSwitchChange",value:function(e){if(null!=e)this.setState({logEnabled:e.target.checked});else{var t=this.state.logEnabled;this.setState({logEnabled:!t})}}},{key:"onDeleteClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.pop(),this.setState({logState:e})}}},{key:"onSpaceClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.push(" "),this.setState({logState:e})}}},{key:"onReturnClick",value:function(){if(this.state.logEnabled){var e=this.state.logState;e.push("\n"),this.setState({logState:e})}}},{key:"onClearClick",value:function(){var e=this.state.logState;e=[],this.setState({logState:e})}},{key:"onCopyClick",value:function(){var e=this.state.logState,t=document.createElement("textarea");document.body.appendChild(t),t.value=e.join(""),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"onDisplayChange",value:function(e){this.setState({display:e.target.value}),this.searchParams.set("display",e.target.value),this.updateQueryString()}},{key:"onLayoutChange",value:function(e){this.setState({layout:e.target.value}),this.searchParams.set("layout",e.target.value),this.updateQueryString(),this.layout=this.layouts[e.target.value],this.updateLayout()}},{key:"render",value:function(){return this.state.ready?n.a.createElement("div",{className:"app"},n.a.createElement(L.a,{maxWidth:"xl"},n.a.createElement(g,{layout:this.layout,state:this.state.mapState,display:this.state.display}),n.a.createElement(K,{onSwitchChange:this.onSwitchChange.bind(this),onDeleteClick:this.onDeleteClick.bind(this),onSpaceClick:this.onSpaceClick.bind(this),onReturnClick:this.onReturnClick.bind(this),onClearClick:this.onClearClick.bind(this),onCopyClick:this.onCopyClick.bind(this),state:this.state.logState,enabled:this.state.logEnabled}),n.a.createElement(O,{onDisplayChange:this.onDisplayChange.bind(this),onLayoutChange:this.onLayoutChange.bind(this),defaultDisplayValue:this.state.display,displayOptions:this.displayOptions,defaultLayoutValue:this.state.layout,layoutOptions:Object.keys(this.layouts)}),n.a.createElement(w,null))):n.a.createElement("div",{className:"app"},n.a.createElement(L.a,{maxWidth:"xl"},n.a.createElement("div",{className:"loading"},n.a.createElement(m.a,null,n.a.createElement("div",{className:"loading-inner"},n.a.createElement("div",{className:"loading-item"},n.a.createElement(F.a,null)),n.a.createElement("div",{className:"loading-item"},n.a.createElement(F.a,{variant:"determinate",value:this.state.percent,color:"secondary"})))))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.e20366d2.chunk.js.map