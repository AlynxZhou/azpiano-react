{"version":3,"sources":["Map.js","Log.js","Settings.js","Info.js","AudioPlayer.js","Base64Decoder.js","App.js","serviceWorker.js","index.js"],"names":["Block","Paper","className","this","props","pressed","upper","lower","React","Component","Map","block","y","x","length","codesChars","layoutParam","displayParam","notesDigits","Grid","item","xs","state","row","container","justify","spacing","wrap","map","renderBlock","layout","renderRow","bind","Log","textRef","createRef","prevProps","prevState","snapshot","current","scrollTop","scrollHeight","TextField","value","outputMode","join","variant","inputProps","inputRef","fullWidth","rows","multiline","FormControlLabel","control","Switch","checked","enabled","color","onChange","onSwitchChange","label","Button","onClick","onSpaceClick","onReturnClick","onDeleteClick","onClearClick","onCopyClick","Settings","FormControl","InputLabel","id","Select","labelId","defaultValue","defaultDisplayValue","onDisplayChange","displayOptions","option","index","MenuItem","defaultOutputValue","onOutputChange","outputOptions","defaultLayoutValue","onLayoutChange","layoutOptions","Info","href","target","rel","title","AudioContext","window","webkitAudioContext","AudioPlayer","opts","context","gainNode","createGain","gain","connect","destination","sources","stopDelay","decodeAudioData","buffer","createBufferSource","start","currentTime","stop","pause","Base64Decoder","keyStr","input","i","charAt","substring","replace","chr1","chr2","chr3","enc2","enc3","enc4","bytes","removePaddingChars","ArrayBuffer","uarray","Uint8Array","j","indexOf","OGG_HEADER_LENGTH","App","decoder","searchParams","URLSearchParams","location","search","mapLayouts","defaultLayout","ctrlcapsLayout","hhkbLayout","jpLayout","dvorakLayout","has","get","mapLayout","updateMapLayout","notesBuffers","notesLily","handleKeyDown","handleKeyUp","handleVisibilityChange","handleStartClick","handleSwitchChange","handleDeleteClick","handleSpaceClick","handleReturnClick","handleClearClick","handleCopyClick","handleDisplayChange","handleOutputChange","handleLayoutChange","document","addEventListener","removeEventListener","newPath","protocol","host","pathname","toString","history","replaceState","codesNotes","grid","event","visibilityState","player","pauseAll","setState","preventDefault","ready","code","repeat","note","logState","mapState","logEnabled","push","outputParam","play","onStartClick","pop","dummy","createElement","body","appendChild","select","execCommand","removeChild","set","updateQueryString","then","totalLength","Object","keys","k","decode","Math","round","Container","maxWidth","LinearProgress","percent","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.d8b18ae8.chunk.js","sourcesContent":["import React from \"react\";\nimport notesDigits from \"./notesDigits.json\";\nimport codesChars from \"./codesChars.json\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport \"./Map.css\";\n\nclass Block extends React.Component {\n  render() {\n    return (\n      <Paper className={this.props.pressed ? \"grid grid-pressed\" : \"grid\"}>\n        <span className='grid-upper'>{this.props.upper}</span>\n        <br />\n        <span className='grid-lower'>{this.props.lower}</span>\n      </Paper>\n    );\n  }\n}\n\nclass Map extends React.Component {\n  renderBlock(block, y, x, length) {\n    let upper = codesChars[block[0]];\n    // Japanese are so strange, their key codes differ from characters...\n    if (this.props.layoutParam === \"jp\") {\n      switch (block[0]) {\n        case \"Equal\":\n          upper = \"^\";\n          break;\n        case \"BracketLeft\":\n          upper = \"@\";\n          break;\n        case \"BracketRight\":\n          upper = \"[\";\n          break;\n        case \"Quote\":\n          upper = \":\";\n          break;\n        case \"Backslash\":\n          upper = \"]\";\n          break;\n        default:\n          break;\n      }\n    }\n    const lower = this.props.displayParam === \"digit\"\n      ? notesDigits[block[1]]\n      : block[1];\n    /**\n     * I know this is too long, this is too simple, and this is too stupid.\n     * But it is clear to see which key takes how much space.\n     * I can merge some same length key, but if one day they need to change,\n     * it is hard because I need to take them apart with copy & paste.\n     */\n    if (x === 0 && y === length - 1) {\n      if (this.props.layoutParam === \"hhkb\") {\n        // Backquote.\n        return (\n          <Grid item xs={2} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      } else {\n        // Backspace.\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      }\n    } else if (x === 1 && y === 0) {\n      // Tab.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      );\n    } else if (x === 1 && y === length - 1) {\n      if (this.props.layoutParam === \"jp\") {\n        // Enter.\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      } else {\n        // Backslash.\n        return (\n          <Grid item xs={3} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      }\n    } else if (x === 2 && y === 0) {\n      // CapsLock.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      );\n    } else if (x === 2 && y === length - 1) {\n      // Enter.\n      if (this.props.layoutParam === \"jp\") {\n        return (\n          <Grid item xs={3} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      } else {\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        );\n      }\n    } else if (x === 3 && y === 0) {\n      // ShiftLeft.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      );\n    } else if (x === 3 && y === length - 1) {\n      // ShiftRight.\n      return (\n        <Grid item xs={4} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      );\n    } else if (x === 4) {\n      // Space.\n      return (\n        <Grid item xs={6} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      );\n    }\n    // Other digit, alpha and symbol.\n    return (\n      <Grid item xs={2} key={y}>\n        <Block\n          upper={upper}\n          lower={lower}\n          pressed={this.props.state[block[0]]}\n        />\n      </Grid>\n    );\n  }\n\n  renderRow(row, x) {\n    return (\n      <Grid container justify='center' spacing={3} wrap='nowrap' key={x}>\n        {row.map((block, y) => {\n          return this.renderBlock(block, y, x, row.length);\n        })}\n      </Grid>\n    );\n  }\n\n  render() {\n    return (\n      <div className='map'>\n        <Paper>\n          <div className='map-inner'>\n            {this.props.layout.map(this.renderRow.bind(this))}\n          </div>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default Map;\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport \"./Log.css\";\n\nclass Log extends React.Component {\n  constructor(props) {\n    super(props);\n    // Ref is needed to access DOM.\n    this.textRef = React.createRef();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // Scroll to bottom on every updates.\n    // Use current because we want to modify current status.\n    this.textRef.current.scrollTop = this.textRef.current.scrollHeight;\n  }\n\n  render() {\n    return (\n      <div className='log'>\n        <Paper>\n          <div className='log-inner'>\n            <div className='log-text'>\n              <TextField\n                value={\n                  this.props.outputMode === \"digit\"\n                    ? this.props.state.join(\"\")\n                    : this.props.state.join(\" \")\n                }\n                variant='outlined'\n                inputProps={{\"readOnly\": true}}\n                // Pass ref to textarea.\n                inputRef={this.textRef}\n                fullWidth\n                rows='8'\n                multiline\n              />\n            </div>\n            <div className='log-buttons'>\n              <div className='log-item'>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      className='log-button'\n                      checked={this.props.enabled}\n                      color='primary'\n                      onChange={this.props.onSwitchChange}\n                    />\n                  }\n                  label='Enable (F1)'\n                />\n              </div>\n              <div className='log-item'>\n                <Button\n                  className='log-button'\n                  variant='contained'\n                  onClick={this.props.onSpaceClick}\n                >Space (F2)\n                </Button>\n              </div>\n              <div className='log-item'>\n                <Button\n                  className='log-button'\n                  variant='contained'\n                  onClick={this.props.onReturnClick}\n                >Return (F3)\n                </Button>\n              </div>\n              <div className='log-item'>\n                <Button\n                  className='log-button'\n                  variant='contained'\n                  color='secondary'\n                  onClick={this.props.onDeleteClick}\n                >Delete (F4)\n                </Button>\n              </div>\n              <div className='log-item'>\n                <Button\n                  className='log-button'\n                  variant='contained'\n                  color='secondary'\n                  onClick={this.props.onClearClick}\n                >Clear (F5)\n                </Button>\n              </div>\n              <div className='log-item'>\n                <Button\n                  className='log-button'\n                  variant='contained'\n                  color='primary'\n                  onClick={this.props.onCopyClick}\n                >Copy (F6)\n                </Button>\n              </div>\n            </div>\n          </div>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default Log;\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport \"./Settings.css\";\n\nclass Settings extends React.Component {\n  render() {\n    return (\n      <div className='settings'>\n        <Paper>\n          <div className='settings-inner'>\n            <div className='settings-item'>\n              <FormControl fullWidth>\n                <InputLabel id='display'>Display</InputLabel>\n                <Select\n                  labelId='display'\n                  defaultValue={this.props.defaultDisplayValue}\n                  onChange={this.props.onDisplayChange}\n                >\n                  {this.props.displayOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    );\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n            <div className='settings-item'>\n              <FormControl fullWidth>\n                <InputLabel id='output'>Output</InputLabel>\n                <Select\n                  labelId='output'\n                  defaultValue={this.props.defaultOutputValue}\n                  onChange={this.props.onOutputChange}\n                >\n                  {this.props.outputOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    );\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n            <div className='settings-item'>\n              <FormControl fullWidth>\n                <InputLabel id='layout'>Layout</InputLabel>\n                <Select\n                  labelId='layout'\n                  defaultValue={this.props.defaultLayoutValue}\n                  onChange={this.props.onLayoutChange}\n                >\n                  {this.props.layoutOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    );\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n          </div>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport \"./Info.css\";\n\nclass Info extends React.Component {\n  render() {\n    return (\n      <div className='info'>\n        <Paper>\n          <div className='info-inner'>\n            <div>Star or fork on <a href='https://github.com/AlynxZhou/azpiano-react/' target='_blank' rel='noreferrer noopener'>GitHub</a>.</div>\n            <div>Welcome to <a href='https://alynx.one/' target='_blank' rel='noreferrer noopener'>Alynx Zhou's Homepage</a>.</div>\n            <div>Icons made by <a href='https://www.flaticon.com/authors/smartline' title='Smartline' target='_blank' rel='noreferrer noopener'>Smartline</a> from <a href='https://www.flaticon.com/' title='Flaticon' target='_blank' rel='noreferrer noopener'>www.flaticon.com</a>.</div>\n          </div>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default Info;\n","const AudioContext = window.AudioContext || window.webkitAudioContext;\n\nclass AudioPlayer {\n  constructor(opts = {}) {\n    this.context = new AudioContext();\n    this.gainNode = this.context.createGain();\n    this.gainNode.gain.value = 1;\n    this.gainNode.connect(this.context.destination);\n    this.sources = {};\n    this.stopDelay = opts.stopDelay || 0.3;\n    this.decodeAudioData = this.context.decodeAudioData.bind(this.context);\n  }\n\n  play(id, buffer) {\n    if (this.sources[id] != null) {\n      return;\n    }\n    this.sources[id] = this.context.createBufferSource();\n    this.sources[id].buffer = buffer;\n    this.sources[id].connect(this.gainNode);\n    this.sources[id].start(this.context.currentTime);\n  }\n\n  pause(id) {\n    if (this.sources[id] == null) {\n      return;\n    }\n    this.sources[id].stop(this.context.currentTime + this.stopDelay);\n    delete this.sources[id];\n  }\n\n  pauseAll() {\n    for (const id in this.sources) {\n      this.pause(id);\n    }\n  }\n}\n\nexport default AudioPlayer;\n","class Base64Decoder {\r\n  constructor() {\r\n    this.keyStr =\r\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n  }\r\n\r\n  removePaddingChars(input) {\r\n    for (let i = input.length - 1; i >= 0; --i) {\r\n      if (input.charAt(i) !== \"=\") {\r\n        return input.substring(0, i + 1);\r\n      }\r\n    }\r\n    // input.length === 0\r\n    return input;\r\n  }\r\n\r\n  decode(input) {\r\n    input = input.replace(/[^A-Za-z0-9+/=]/g, \"\");\r\n    input = this.removePaddingChars(input);\r\n    const bytes = input.length / 4 * 3;\r\n\r\n    const buffer = new ArrayBuffer(bytes);\r\n    const uarray = new Uint8Array(buffer);\r\n    let chr1, chr2, chr3;\r\n    let enc1, enc2, enc3, enc4;\r\n    let j = 0;\r\n\r\n    for (let i = 0; i < bytes; i += 3) {\r\n      enc1 = this.keyStr.indexOf(input.charAt(j++));\r\n      enc2 = this.keyStr.indexOf(input.charAt(j++));\r\n      enc3 = this.keyStr.indexOf(input.charAt(j++));\r\n      enc4 = this.keyStr.indexOf(input.charAt(j++));\r\n\r\n      chr1 = (enc1 << 2) | (enc2 >> 4);\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n      chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n      uarray[i] = chr1;\r\n      if (enc3 !== 64) {\r\n        uarray[i + 1] = chr2;\r\n      }\r\n      if (enc4 !== 64) {\r\n        uarray[i + 2] = chr3;\r\n      }\r\n    }\r\n\r\n    return buffer;\r\n  }\r\n}\r\n\r\nexport default Base64Decoder;\r\n","import React from \"react\";\nimport Map from \"./Map\";\nimport Log from \"./Log\";\nimport Settings from \"./Settings\";\nimport Info from \"./Info\";\nimport AudioPlayer from \"./AudioPlayer\";\nimport Base64Decoder from \"./Base64Decoder\";\nimport defaultLayout from \"./layouts/default.json\";\nimport ctrlcapsLayout from \"./layouts/ctrlcaps.json\";\nimport hhkbLayout from \"./layouts/hhkb.json\";\nimport jpLayout from \"./layouts/jp.json\";\nimport dvorakLayout from \"./layouts/dvorak.json\";\nimport notesDigits from \"./notesDigits.json\";\nimport notesLily from \"./notesLily.json\";\nimport \"./App.css\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nconst OGG_HEADER_LENGTH = \"data:audio/ogg;base64,\".length;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.decoder = new Base64Decoder();\n    this.searchParams = new URLSearchParams(window.location.search);\n    this.mapLayouts = {\n      \"default\": defaultLayout,\n      \"ctrlcaps\": ctrlcapsLayout,\n      \"hhkb\": hhkbLayout,\n      \"jp\": jpLayout,\n      \"dvorak\": dvorakLayout\n    };\n    this.displayOptions = [\"digit\", \"note\"];\n    this.outputOptions = [\"digit\", \"lilypond-is\", \"lilypond-es\"];\n    this.state = {\n      \"start\": false,\n      \"ready\": false,\n      \"percent\": 0,\n      \"logState\": [],\n      \"logEnabled\": true,\n      \"mapState\": {},\n      \"displayParam\": this.searchParams.has(\"display\") &&\n        this.displayOptions.indexOf(this.searchParams.get(\"display\")) !== -1\n        ? this.searchParams.get(\"display\")\n        : \"digit\",\n      \"outputParam\": this.searchParams.has(\"output\") &&\n        this.outputOptions.indexOf(this.searchParams.get(\"output\")) !== -1\n        ? this.searchParams.get(\"output\")\n        : \"digit\",\n      \"layoutParam\": this.searchParams.has(\"layout\") &&\n        this.mapLayouts[this.searchParams.get(\"layout\")] != null\n        ? this.searchParams.get(\"layout\")\n        : \"default\"\n    };\n    // Don't use state to store layout, it's **async**!\n    this.mapLayout = this.mapLayouts[this.state.layoutParam];\n    this.updateMapLayout();\n\n    this.notesBuffers = {};\n\n    this.notesDigits = notesDigits;\n    this.notesLily = notesLily;\n\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    this.handleStartClick = this.handleStartClick.bind(this);\n    this.handleSwitchChange = this.handleSwitchChange.bind(this);\n    this.handleDeleteClick = this.handleDeleteClick.bind(this);\n    this.handleSpaceClick = this.handleSpaceClick.bind(this);\n    this.handleReturnClick = this.handleReturnClick.bind(this);\n    this.handleClearClick = this.handleClearClick.bind(this);\n    this.handleCopyClick = this.handleCopyClick.bind(this);\n    this.handleDisplayChange = this.handleDisplayChange.bind(this);\n    this.handleOutputChange = this.handleOutputChange.bind(this);\n    this.handleLayoutChange = this.handleLayoutChange.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"keyup\", this.handleKeyUp);\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"keyup\", this.handleKeyUp);\n    document.removeEventListener(\n      \"visibilitychange\",\n      this.handleVisibilityChange\n    );\n  }\n\n  updateQueryString() {\n    const newPath = [\n      window.location.protocol,\n      \"//\",\n      window.location.host,\n      window.location.pathname,\n      \"?\",\n      this.searchParams.toString()\n    ].join(\"\");\n    window.history.replaceState({\"path\": newPath}, \"\", newPath);\n  }\n\n  updateMapLayout() {\n    this.codesNotes = {};\n    for (const row of this.mapLayout) {\n      for (const grid of row) {\n        this.codesNotes[grid[0]] = grid[1];\n      }\n    }\n  }\n\n  handleVisibilityChange(event) {\n    // Typically no keyup event is send when user switch tabs.\n    // So we clear state manually.\n    if (document.visibilityState !== \"visible\") {\n      this.player.pauseAll();\n      this.setState({\"mapState\": {}});\n    }\n  }\n\n  handleKeyDown(event) {\n    event.preventDefault();\n    // \"Press Any Key to Start\"!\n    // Ah, in fact, not any key.\n    if (!this.state.ready) {\n      this.onStartClick();\n      return;\n    }\n    switch (event.code) {\n      case \"F1\":\n        this.onSwitchChange();\n        return;\n      case \"F2\":\n        this.onSpaceClick();\n        return;\n      case \"F3\":\n        this.onReturnClick();\n        return;\n      case \"F4\":\n        this.onDeleteClick();\n        return;\n      case \"F5\":\n        this.onClearClick();\n        return;\n      case \"F6\":\n        this.onCopyClick();\n        return;\n      default:\n        break;\n    }\n    if (event.repeat || this.codesNotes[event.code] == null) {\n      return;\n    }\n    const code = event.code;\n    const note = this.codesNotes[code];\n    const {logState, mapState} = this.state;\n    mapState[code] = true;\n    if (this.state.logEnabled && this.state.ready) {\n      logState.push(\n        this.state.outputParam === \"digit\"\n          ? this.notesDigits[note]\n          : this.notesLily[this.state.outputParam][note]\n      );\n    }\n    this.setState({logState, mapState});\n    this.player.play(note, this.notesBuffers[note]);\n  }\n\n  handleKeyUp(event) {\n    event.preventDefault();\n    if (event.repeat || this.codesNotes[event.code] == null) {\n      return;\n    }\n    const code = event.code;\n    const note = this.codesNotes[code];\n    const {mapState} = this.state;\n    mapState[code] = false;\n    this.setState({mapState});\n    this.player.pause(note);\n  }\n\n  handleSwitchChange(event) {\n    if (event == null) {\n      const {logEnabled} = this.state;\n      this.setState({\"logEnabled\": !logEnabled});\n      return;\n    }\n    this.setState({\"logEnabled\": event.target.checked});\n  }\n\n  handleDeleteClick() {\n    if (!this.state.logEnabled) {\n      return;\n    }\n    const {logState} = this.state;\n    logState.pop();\n    this.setState({logState});\n  }\n\n  handleSpaceClick() {\n    if (!this.state.logEnabled) {\n      return;\n    }\n    const {logState} = this.state;\n    logState.push(\" \");\n    this.setState({logState});\n  }\n\n  handleReturnClick() {\n    if (!this.state.logEnabled) {\n      return;\n    }\n    const {logState} = this.state;\n    logState.push(\"\\n\");\n    this.setState({logState});\n  }\n\n  handleClearClick() {\n    let {logState} = this.state;\n    logState = [];\n    this.setState({logState});\n  }\n\n  handleCopyClick() {\n    const {logState} = this.state;\n    const dummy = document.createElement(\"textarea\");\n    document.body.appendChild(dummy);\n    dummy.value = logState.join(\"\");\n    dummy.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(dummy);\n  }\n\n  handleDisplayChange(event) {\n    this.setState({\"displayParam\": event.target.value});\n    this.searchParams.set(\"display\", event.target.value);\n    this.updateQueryString();\n  }\n\n  handleOutputChange(event) {\n    this.setState({\"outputParam\": event.target.value});\n    this.searchParams.set(\"output\", event.target.value);\n    this.updateQueryString();\n  }\n\n  handleLayoutChange(event) {\n    // setState is only used for re-trigger rendering.\n    this.setState({\"layoutParam\": event.target.value});\n    this.searchParams.set(\"layout\", event.target.value);\n    this.updateQueryString();\n    // Don't use state to update layout, it's **async**!\n    this.mapLayout = this.mapLayouts[event.target.value];\n    this.updateMapLayout();\n  }\n\n  handleStartClick() {\n    // Oh I hate Chromium!\n    // Why I can only create AudioPlayer after user action?\n    this.setState({\"start\": true});\n    this.player = new AudioPlayer();\n    // Webpack trunked loading.\n    import(\"./notesBuffers.json\").then(({\"default\": notesBuffers}) => {\n      const totalLength = Object.keys(notesBuffers).length;\n      for (const k of Object.keys(notesBuffers)) {\n        this.player.decodeAudioData(this.decoder.decode(\n          notesBuffers[k].substring(OGG_HEADER_LENGTH)\n        ), (buffer) => {\n          this.notesBuffers[k] = buffer;\n          if (!this.state.ready) {\n            this.setState({\n              \"percent\": Math.round(\n                Object.keys(this.notesBuffers).length * 100 / totalLength\n              ),\n              \"ready\": Object.keys(this.notesBuffers).length === totalLength\n            });\n          }\n        });\n      }\n    });\n  }\n\n  render() {\n    // So if user has gone to toliet,\n    // we need to wait, too.\n    if (!this.state.start) {\n      return (\n        <div className='app'>\n          <Container maxWidth='xl'>\n            <div className='loading'>\n              <Paper>\n                <div className='loading-inner'>\n                  <div className='loading-item'>\n                    <Button\n                      variant='contained'\n                      color='primary'\n                      onClick={this.handleStartClick}\n                    >\n                      Press Any Key to Start\n                    </Button>\n                  </div>\n                </div>\n              </Paper>\n            </div>\n          </Container>\n        </div>\n      );\n    }\n    if (!this.state.ready) {\n      return (\n        <div className='app'>\n          <Container maxWidth='xl'>\n            <div className='loading'>\n              <Paper>\n                <div className='loading-inner'>\n                  <div className='loading-item'>\n                    <LinearProgress />\n                  </div>\n                  <div className='loading-item'>\n                    <LinearProgress\n                      variant='determinate'\n                      value={this.state.percent}\n                      color='secondary'\n                    />\n                  </div>\n                </div>\n              </Paper>\n            </div>\n          </Container>\n        </div>\n      );\n    }\n    return (\n      <div className='app'>\n        <Container maxWidth='xl'>\n          <Map\n            layout={this.mapLayout}\n            state={this.state.mapState}\n            layoutParam={this.state.layoutParam}\n            displayParam={this.state.displayParam}\n          />\n          <Log\n            onSwitchChange={this.handleSwitchChange}\n            onDeleteClick={this.handleDeleteClick}\n            onSpaceClick={this.handleSpaceClick}\n            onReturnClick={this.handleReturnClick}\n            onClearClick={this.handleClearClick}\n            onCopyClick={this.handleCopyClick}\n            outputMode={this.state.outputParam}\n            state={this.state.logState}\n            enabled={this.state.logEnabled}\n          />\n          <Settings\n            onDisplayChange={this.handleDisplayChange}\n            onOutputChange={this.handleOutputChange}\n            onLayoutChange={this.handleLayoutChange}\n            defaultDisplayValue={this.state.displayParam}\n            displayOptions={this.displayOptions}\n            defaultOutputValue={this.state.outputParam}\n            outputOptions={this.outputOptions}\n            defaultLayoutValue={this.state.layoutParam}\n            layoutOptions={Object.keys(this.mapLayouts)}\n          />\n          <Info />\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    \"headers\": {\"Service-Worker\": \"script\"}\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}