{"version":3,"sources":["Map.js","Log.js","Settings.js","Info.js","AudioPlayer.js","Base64Decoder.js","App.js","serviceWorker.js","index.js"],"names":["Block","Paper","className","this","props","pressed","upper","lower","React","Component","Map","block","y","x","length","codesChars","layoutParam","displayParam","notesDigits","Grid","item","xs","key","state","row","container","justify","spacing","wrap","map","renderBlock","layout","renderRow","bind","Log","TextField","value","outputMode","join","variant","InputProps","fullWidth","rows","multiline","FormControlLabel","control","Switch","checked","enabled","color","onChange","onSwitchChange","label","Button","onClick","onSpaceClick","onReturnClick","onDeleteClick","onClearClick","onCopyClick","Settings","FormControl","InputLabel","id","Select","labelId","defaultValue","defaultDisplayValue","onDisplayChange","displayOptions","option","index","MenuItem","defaultOutputValue","onOutputChange","outputOptions","defaultLayoutValue","onLayoutChange","layoutOptions","Info","href","target","rel","title","AudioContext","window","webkitAudioContext","AudioPlayer","opts","context","gainNode","createGain","gain","connect","destination","sources","stopDelay","decodeAudioData","buffer","createBufferSource","start","currentTime","stop","pause","Base64Decoder","keyStr","input","i","charAt","substring","replace","chr1","chr2","chr3","enc2","enc3","enc4","bytes","removePaddingChars","ArrayBuffer","uarray","Uint8Array","j","indexOf","OGG_HEADER_LENGTH","App","decoder","searchParams","URLSearchParams","location","search","mapLayouts","defaultLayout","ctrlcapsLayout","hhkbLayout","jpLayout","dvorakLayout","has","get","mapLayout","updateMapLayout","notesBuffers","notesLily","document","addEventListener","onKeyDown","onKeyUp","onVisibilityChange","removeEventListener","newPath","protocol","host","pathname","toString","history","replaceState","codesNotes","grid","event","visibilityState","player","pauseAll","setState","preventDefault","ready","code","repeat","note","logState","mapState","logEnabled","push","outputParam","play","onStartClick","pop","dummy","createElement","body","appendChild","select","execCommand","removeChild","set","updateQueryString","then","totalLength","Object","keys","k","decode","Math","round","Container","maxWidth","LinearProgress","percent","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.b43b04ae.chunk.js","sourcesContent":["import React from 'react'\nimport notesDigits from './notesDigits.json'\nimport codesChars from './codesChars.json'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\nimport './Map.css'\n\nclass Block extends React.Component {\n  render() {\n    return (\n      <Paper className={this.props.pressed ? \"grid grid-pressed\" : \"grid\"}>\n        <span className=\"grid-upper\">{this.props.upper}</span>\n        <br />\n        <span className=\"grid-lower\">{this.props.lower}</span>\n      </Paper>\n    )\n  }\n}\n\nclass Map extends React.Component {\n  renderBlock(block, y, x, length) {\n    let upper = codesChars[block[0]]\n    // Japanese are so strange, their key codes differ from characters...\n    if (this.props.layoutParam === 'jp') {\n      switch (block[0]) {\n        case 'Equal':\n          upper = '^'\n          break\n        case 'BracketLeft':\n          upper = '@'\n          break\n        case 'BracketRight':\n          upper = '['\n          break\n        case 'Quote':\n          upper = ':'\n          break\n        case 'Backslash':\n          upper = ']'\n          break\n        default:\n          break\n      }\n    }\n    const lower = this.props.displayParam === 'digit'\n      ? notesDigits[block[1]]\n      : block[1]\n    /**\n     * I know this is too long, this is too simple, and this is too stupid.\n     * But it is clear to see which key takes how much space.\n     * I can merge some same length key, but if one day they need to change,\n     * it is hard because I need to take them apart with copy & paste.\n     */\n    if (x === 0 && y === length - 1) {\n      if (this.props.layoutParam === 'hhkb') {\n        // Backquote.\n        return (\n          <Grid item xs={2} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        )\n      } else {\n        // Backspace.\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        )\n      }\n    } else if (x === 1 && y === 0) {\n      // Tab.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      )\n    } else if (x === 1 && y === length - 1) {\n      if (this.props.layoutParam === 'jp') {\n        // Enter.\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n              />\n          </Grid>\n        )\n      } else {\n        // Backslash.\n        return (\n          <Grid item xs={3} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        )\n      }\n    } else if (x === 2 && y === 0) {\n      // CapsLock.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      )\n    } else if (x === 2 && y === length - 1) {\n      // Enter.\n      if (this.props.layoutParam === 'jp') {\n        return (\n          <Grid item xs={3} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        )\n      } else {\n        return (\n          <Grid item xs={4} key={y}>\n            <Block\n              upper={upper}\n              lower={lower}\n              pressed={this.props.state[block[0]]}\n            />\n          </Grid>\n        )\n      }\n    } else if (x === 3 && y === 0) {\n      // ShiftLeft.\n      return (\n        <Grid item xs={3} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      )\n    } else if (x === 3 && y === length - 1) {\n      // ShiftRight.\n      return (\n        <Grid item xs={4} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      )\n    } else if (x === 4) {\n      // Space.\n      return (\n        <Grid item xs={6} key={y}>\n          <Block\n            upper={upper}\n            lower={lower}\n            pressed={this.props.state[block[0]]}\n          />\n        </Grid>\n      )\n    }\n    // Other digit, alpha and symbol.\n    return (\n      <Grid item xs={2} key={y}>\n        <Block\n          upper={upper}\n          lower={lower}\n          pressed={this.props.state[block[0]]}\n        />\n      </Grid>\n    )\n  }\n\n  renderRow(row, x) {\n    return (\n      <Grid container justify=\"center\" spacing={3} wrap=\"nowrap\" key={x}>\n        {row.map((block, y) => {\n          return this.renderBlock(block, y, x, row.length)\n        })}\n      </Grid>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"map\">\n        <Paper>\n          <div className=\"map-inner\">\n            {this.props.layout.map(this.renderRow.bind(this))}\n          </div>\n        </Paper>\n      </div>\n    )\n  }\n}\n\nexport default Map\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Switch from '@material-ui/core/Switch'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport './Log.css'\n\nclass Log extends React.Component {\n  render() {\n    return (\n      <div className=\"log\">\n        <Paper>\n          <div className=\"log-inner\">\n            <div className=\"log-text\">\n              <TextField\n                value={\n                  this.props.outputMode === \"digit\"\n                    ? this.props.state.join('')\n                    : this.props.state.join(' ')\n                }\n                variant=\"outlined\"\n                InputProps={{'readOnly': true}}\n                fullWidth\n                rows=\"8\"\n                multiline\n              />\n            </div>\n            <div className=\"log-buttons\">\n              <div className=\"log-item\">\n                <FormControlLabel\n                  control={\n                    <Switch\n                      className=\"log-button\"\n                      checked={this.props.enabled}\n                      color=\"primary\"\n                      onChange={this.props.onSwitchChange}\n                    />\n                  }\n                  label=\"Enable (F1)\"\n                />\n              </div>\n              <div className=\"log-item\">\n                <Button\n                  className=\"log-button\"\n                  variant=\"contained\"\n                  onClick={this.props.onSpaceClick}\n                >Space (F2)</Button>\n              </div>\n              <div className=\"log-item\">\n                <Button\n                  className=\"log-button\"\n                  variant=\"contained\"\n                  onClick={this.props.onReturnClick}\n                >Return (F3)</Button>\n              </div>\n              <div className=\"log-item\">\n                <Button\n                  className=\"log-button\"\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={this.props.onDeleteClick}\n                >Delete (F4)</Button>\n              </div>\n              <div className=\"log-item\">\n                <Button\n                  className=\"log-button\"\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={this.props.onClearClick}\n                >Clear (F5)</Button>\n              </div>\n              <div className=\"log-item\">\n                <Button\n                  className=\"log-button\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={this.props.onCopyClick}\n                >Copy (F6)</Button>\n              </div>\n            </div>\n          </div>\n        </Paper>\n      </div>\n    )\n  }\n}\n\nexport default Log\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport './Settings.css'\n\nclass Settings extends React.Component {\n  render() {\n    return (\n      <div className=\"settings\">\n        <Paper>\n          <div className=\"settings-inner\">\n            <div className=\"settings-item\">\n              <FormControl fullWidth>\n                <InputLabel id=\"display\">Display</InputLabel>\n                <Select\n                  labelId=\"display\"\n                  defaultValue={this.props.defaultDisplayValue}\n                  onChange={this.props.onDisplayChange}\n                >\n                  {this.props.displayOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    )\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n            <div className=\"settings-item\">\n              <FormControl fullWidth>\n                <InputLabel id=\"output\">Output</InputLabel>\n                <Select\n                  labelId=\"output\"\n                  defaultValue={this.props.defaultOutputValue}\n                  onChange={this.props.onOutputChange}\n                >\n                  {this.props.outputOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    )\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n            <div className=\"settings-item\">\n              <FormControl fullWidth>\n                <InputLabel id=\"layout\">Layout</InputLabel>\n                <Select\n                  labelId=\"layout\"\n                  defaultValue={this.props.defaultLayoutValue}\n                  onChange={this.props.onLayoutChange}\n                >\n                  {this.props.layoutOptions.map((option, index) => {\n                    return (\n                      <MenuItem key={index} value={option}>{option}</MenuItem>\n                    )\n                  })}\n                </Select>\n              </FormControl>\n            </div>\n          </div>\n        </Paper>\n      </div>\n    )\n  }\n}\n\nexport default Settings\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport './Info.css'\n\nclass Info extends React.Component {\n  render() {\n    return (\n      <div className=\"info\">\n        <Paper>\n          <div className=\"info-inner\">\n            <div>Star or fork on <a href=\"https://github.com/AlynxZhou/azpiano-react/\" target=\"_blank\" rel=\"noreferrer noopener\">GitHub</a>.</div>\n            <div>Welcome to <a href=\"https://alynx.one/\" target=\"_blank\" rel=\"noreferrer noopener\">Alynx Zhou's Homepage</a>.</div>\n            <div>Icons made by <a href=\"https://www.flaticon.com/authors/smartline\" title=\"Smartline\" target=\"_blank\" rel=\"noreferrer noopener\">Smartline</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\" target=\"_blank\" rel=\"noreferrer noopener\">www.flaticon.com</a>.</div>\n          </div>\n        </Paper>\n      </div>\n    )\n  }\n}\n\nexport default Info\n","const AudioContext = window.AudioContext || window.webkitAudioContext\n\nclass AudioPlayer {\n  constructor(opts = {}) {\n    this.context = new AudioContext()\n    this.gainNode = this.context.createGain();\n    this.gainNode.gain.value = 1\n    this.gainNode.connect(this.context.destination)\n    this.sources = {}\n    this.stopDelay = opts.stopDelay || 0.3\n    this.decodeAudioData = this.context.decodeAudioData.bind(this.context)\n  }\n\n  play(id, buffer) {\n    if (this.sources[id] != null) {\n      return\n    }\n    this.sources[id] = this.context.createBufferSource()\n    this.sources[id].buffer = buffer\n    this.sources[id].connect(this.gainNode)\n    this.sources[id].start(this.context.currentTime)\n  }\n\n  pause(id) {\n    if (this.sources[id] == null) {\n      return\n    }\n    this.sources[id].stop(this.context.currentTime + this.stopDelay)\n    delete this.sources[id]\n  }\n\n  pauseAll() {\n    for (const id in this.sources) {\n      this.pause(id)\n    }\n  }\n}\n\nexport default AudioPlayer\n","class Base64Decoder {\r\n  constructor() {\r\n    this.keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\r\n  }\r\n\r\n  removePaddingChars(input) {\r\n    for (let i = input.length - 1; i >= 0; --i) {\r\n      if (input.charAt(i) !== '=') {\r\n        return input.substring(0, i + 1)\r\n      }\r\n    }\r\n    // input.length === 0\r\n    return input\r\n  }\r\n\r\n  decode(input) {\r\n    input = input.replace(/[^A-Za-z0-9+/=]/g, '')\r\n    input = this.removePaddingChars(input)\r\n    const bytes = input.length / 4 * 3\r\n\r\n    const buffer = new ArrayBuffer(bytes)\r\n    const uarray = new Uint8Array(buffer)\r\n    let chr1, chr2, chr3\r\n    let enc1, enc2, enc3, enc4\r\n    let j = 0\r\n\r\n    for (let i = 0; i < bytes; i += 3) {\r\n      enc1 = this.keyStr.indexOf(input.charAt(j++))\r\n      enc2 = this.keyStr.indexOf(input.charAt(j++))\r\n      enc3 = this.keyStr.indexOf(input.charAt(j++))\r\n      enc4 = this.keyStr.indexOf(input.charAt(j++))\r\n\r\n      chr1 = (enc1 << 2) | (enc2 >> 4)\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2)\r\n      chr3 = ((enc3 & 3) << 6) | enc4\r\n\r\n      uarray[i] = chr1;\r\n      if (enc3 !== 64) {\r\n        uarray[i + 1] = chr2\r\n      }\r\n      if (enc4 !== 64) {\r\n        uarray[i + 2] = chr3\r\n      }\r\n    }\r\n\r\n    return buffer\r\n  }\r\n}\r\n\r\nexport default Base64Decoder\r\n","import React from 'react'\nimport Map from './Map'\nimport Log from './Log'\nimport Settings from './Settings'\nimport Info from './Info'\nimport AudioPlayer from './AudioPlayer'\nimport Base64Decoder from './Base64Decoder'\nimport defaultLayout from './layouts/default.json'\nimport ctrlcapsLayout from './layouts/ctrlcaps.json'\nimport hhkbLayout from './layouts/hhkb.json'\nimport jpLayout from './layouts/jp.json'\nimport dvorakLayout from './layouts/dvorak.json'\nimport notesDigits from './notesDigits.json'\nimport notesLily from './notesLily.json'\nimport './App.css'\nimport Container from '@material-ui/core/Container'\nimport Paper from '@material-ui/core/Paper'\nimport Button from '@material-ui/core/Button'\nimport LinearProgress from '@material-ui/core/LinearProgress'\n\nconst OGG_HEADER_LENGTH = 'data:audio/ogg;base64,'.length\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.decoder = new Base64Decoder()\n    this.searchParams = new URLSearchParams(window.location.search)\n    this.mapLayouts = {\n      'default': defaultLayout,\n      'ctrlcaps': ctrlcapsLayout,\n      'hhkb': hhkbLayout,\n      'jp': jpLayout,\n      'dvorak': dvorakLayout\n    }\n    this.displayOptions = ['digit', 'note']\n    this.outputOptions = ['digit', 'lilypond-is', 'lilypond-es']\n    this.state = {\n      'start': false,\n      'ready': false,\n      'percent': 0,\n      'logState': [],\n      'logEnabled': true,\n      'mapState': {},\n      'displayParam': this.searchParams.has('display') &&\n        this.displayOptions.indexOf(this.searchParams.get('display')) !== -1\n        ? this.searchParams.get('display')\n        : 'digit',\n      'outputParam': this.searchParams.has('output') &&\n        this.outputOptions.indexOf(this.searchParams.get('output')) !== -1\n        ? this.searchParams.get('output')\n        : 'digit',\n      'layoutParam': this.searchParams.has('layout') &&\n        this.mapLayouts[this.searchParams.get('layout')] != null\n        ? this.searchParams.get('layout')\n        : 'default'\n    }\n    // Don't use state to store layout, it's **async**!\n    this.mapLayout = this.mapLayouts[this.state.layoutParam]\n    this.updateMapLayout()\n\n    this.notesBuffers = {}\n\n    this.notesDigits = notesDigits\n    this.notesLily = notesLily\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onKeyDown.bind(this))\n    document.addEventListener('keyup', this.onKeyUp.bind(this))\n    document.addEventListener(\n      'visibilitychange',\n      this.onVisibilityChange.bind(this)\n    )\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onKeyDown.bind(this))\n    document.removeEventListener('keyup', this.onKeyUp.bind(this))\n    document.removeEventListener(\n      'visibilitychange',\n      this.onVisibilityChange.bind(this)\n    )\n  }\n\n  updateQueryString() {\n    const newPath = [\n      window.location.protocol,\n      '//',\n      window.location.host,\n      window.location.pathname,\n      '?',\n      this.searchParams.toString()\n    ].join('')\n    window.history.replaceState({'path': newPath}, '', newPath);\n  }\n\n  updateMapLayout() {\n    this.codesNotes = {}\n    for (const row of this.mapLayout) {\n      for (const grid of row) {\n        this.codesNotes[grid[0]] = grid[1]\n      }\n    }\n  }\n\n  onVisibilityChange(event) {\n    // Typically no keyup event is send when user switch tabs.\n    // So we clear state manually.\n    if (document.visibilityState !== 'visible') {\n      this.player.pauseAll()\n      this.setState({'mapState': {}})\n    }\n  }\n\n  onKeyDown(event) {\n    event.preventDefault()\n    // \"Press Any Key to Start\"!\n    // Ah, in fact, not any key.\n    if (!this.state.ready) {\n      this.onStartClick()\n      return\n    }\n    switch (event.code) {\n      case 'F1':\n        this.onSwitchChange()\n        return\n      case 'F2':\n        this.onSpaceClick()\n        return\n      case 'F3':\n        this.onReturnClick()\n        return\n      case 'F4':\n        this.onDeleteClick()\n        return\n      case 'F5':\n        this.onClearClick()\n        return\n      case 'F6':\n        this.onCopyClick()\n        return\n      default:\n        break\n    }\n    if (event.repeat || this.codesNotes[event.code] == null) {\n      return\n    }\n    const code = event.code\n    const note = this.codesNotes[code]\n    const {logState, mapState} = this.state\n    mapState[code] = true\n    if (this.state.logEnabled && this.state.ready) {\n      logState.push(\n        this.state.outputParam === \"digit\"\n          ? this.notesDigits[note]\n          : this.notesLily[this.state.outputParam][note]\n      )\n    }\n    this.setState({logState, mapState})\n    this.player.play(note, this.notesBuffers[note])\n  }\n\n  onKeyUp(event) {\n    event.preventDefault()\n    if (event.repeat || this.codesNotes[event.code] == null) {\n      return\n    }\n    const code = event.code\n    const note = this.codesNotes[code]\n    const {mapState} = this.state\n    mapState[code] = false\n    this.setState({mapState})\n    this.player.pause(note)\n  }\n\n  onSwitchChange(event) {\n    if (event == null) {\n      const {logEnabled} = this.state\n      this.setState({'logEnabled': !logEnabled})\n      return\n    }\n    this.setState({'logEnabled': event.target.checked})\n  }\n\n  onDeleteClick() {\n    if (!this.state.logEnabled) {\n      return\n    }\n    const {logState} = this.state\n    logState.pop()\n    this.setState({logState})\n  }\n\n  onSpaceClick() {\n    if (!this.state.logEnabled) {\n      return\n    }\n    const {logState} = this.state\n    logState.push(' ')\n    this.setState({logState})\n  }\n\n  onReturnClick() {\n    if (!this.state.logEnabled) {\n      return\n    }\n    const {logState} = this.state\n    logState.push('\\n')\n    this.setState({logState})\n  }\n\n  onClearClick() {\n    let {logState} = this.state\n    logState = []\n    this.setState({logState})\n  }\n\n  onCopyClick() {\n    const {logState} = this.state\n    const dummy = document.createElement('textarea')\n    document.body.appendChild(dummy)\n    dummy.value = logState.join('')\n    dummy.select()\n    document.execCommand('copy')\n    document.body.removeChild(dummy)\n  }\n\n  onDisplayChange(event) {\n    this.setState({'displayParam': event.target.value})\n    this.searchParams.set('display', event.target.value)\n    this.updateQueryString()\n  }\n\n  onOutputChange(event) {\n    this.setState({'outputParam': event.target.value})\n    this.searchParams.set('output', event.target.value)\n    this.updateQueryString()\n  }\n\n  onLayoutChange(event) {\n    // setState is only used for re-trigger rendering.\n    this.setState({'layoutParam': event.target.value})\n    this.searchParams.set('layout', event.target.value)\n    this.updateQueryString()\n    // Don't use state to update layout, it's **async**!\n    this.mapLayout = this.mapLayouts[event.target.value]\n    this.updateMapLayout()\n  }\n\n  onStartClick() {\n    // Oh I hate Chromium!\n    // Why I can only create AudioPlayer after user action?\n    this.setState({'start': true})\n    this.player = new AudioPlayer()\n    // Webpack trunked loading.\n    import('./notesBuffers.json').then(({'default': notesBuffers}) => {\n      const totalLength = Object.keys(notesBuffers).length\n      for (const k of Object.keys(notesBuffers)) {\n        this.player.decodeAudioData(this.decoder.decode(\n          notesBuffers[k].substring(OGG_HEADER_LENGTH)\n        ), (buffer) => {\n          this.notesBuffers[k] = buffer\n          if (!this.state.ready) {\n            this.setState({\n              'percent': Math.round(\n                Object.keys(this.notesBuffers).length * 100 / totalLength\n              ),\n              'ready': Object.keys(this.notesBuffers).length === totalLength\n            })\n          }\n        })\n      }\n    })\n  }\n\n  render() {\n    // So if user has gone to toliet,\n    // we need to wait, too.\n    if (!this.state.start) {\n      return (\n        <div className=\"app\">\n          <Container maxWidth=\"xl\">\n            <div className=\"loading\">\n              <Paper>\n                <div className=\"loading-inner\">\n                  <div className=\"loading-item\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={this.onStartClick.bind(this)}\n                    >Press Any Key to Start</Button>\n                  </div>\n                </div>\n              </Paper>\n            </div>\n          </Container>\n        </div>\n      )\n    }\n    if (!this.state.ready) {\n      return (\n        <div className=\"app\">\n          <Container maxWidth=\"xl\">\n            <div className=\"loading\">\n              <Paper>\n                <div className=\"loading-inner\">\n                  <div className=\"loading-item\">\n                    <LinearProgress />\n                  </div>\n                  <div className=\"loading-item\">\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={this.state.percent}\n                      color=\"secondary\"\n                    />\n                  </div>\n                </div>\n              </Paper>\n            </div>\n          </Container>\n        </div>\n      )\n    }\n    return (\n      <div className=\"app\">\n        <Container maxWidth=\"xl\">\n          <Map\n            layout={this.mapLayout}\n            state={this.state.mapState}\n            layoutParam={this.state.layoutParam}\n            displayParam={this.state.displayParam}\n          />\n          <Log\n            onSwitchChange={this.onSwitchChange.bind(this)}\n            onDeleteClick={this.onDeleteClick.bind(this)}\n            onSpaceClick={this.onSpaceClick.bind(this)}\n            onReturnClick={this.onReturnClick.bind(this)}\n            onClearClick={this.onClearClick.bind(this)}\n            onCopyClick={this.onCopyClick.bind(this)}\n            outputMode={this.state.outputParam}\n            state={this.state.logState}\n            enabled={this.state.logEnabled}\n          />\n          <Settings\n            onDisplayChange={this.onDisplayChange.bind(this)}\n            onOutputChange={this.onOutputChange.bind(this)}\n            onLayoutChange={this.onLayoutChange.bind(this)}\n            defaultDisplayValue={this.state.displayParam}\n            displayOptions={this.displayOptions}\n            defaultOutputValue={this.state.outputParam}\n            outputOptions={this.outputOptions}\n            defaultLayoutValue={this.state.layoutParam}\n            layoutOptions={Object.keys(this.mapLayouts)}\n          />\n          <Info />\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}